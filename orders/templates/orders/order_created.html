{% extends 'base.html' %}
{% block title %}Pedido creado{% endblock %}
{% load humanize %}


{% block content %}
<div class="container p-6 mx-auto mt-10 text-center bg-white rounded-lg shadow">

    <div>
        <i class="text-3xl text-yellow-300 fa-solid fa-plug"></i>
        <h2 class="mb-4 text-2xl font-bold text-green-600"> Factura # {{invoice.number}}</h2>
        <p><strong>Fecha</strong>{{invoice.date_invoice|date:"d/m/Y H:i"}}</p>
        <p><strong>Orden Id:</strong> {{order.id}}</p>
    </div>
    <hr class="my-4">

    <h2 class="text-xl font-semibold">Detalles del pedido:</h2>
    <ul>
        {% for item in order.items.all %}
            <li>{{ item.product.name }} â€” {{ item.quantity }} x ${{ item.price }}</li>
        {% endfor %}
    </ul>

    <hr class="my-4">


    <p>NOMBRE DE CLIENTE: <strong>{{ order.user.username }}</strong>.</p>

    <table class="w-full text-left border border-gray-300 mt-6">
        <thead class="bg-gray-100">
            <tr>
                <th class="border p-2">Producto</th>
                <th class="border p-2 text-center">Cantidad</th>
                <th class="border p-2 text-right">Precio unitario</th>
                <th class="border p-2 text-right">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items.all %}
            <tr>
                <td class="border p-2">{{ item.product.name }}</td>
                <td class="border p-2 text-center">{{ item.quantity }}</td>
                <td class="border p-2 text-right">${{ item.price |intcomma}}</td>
                <td class="border p-2 text-right">${{ item.costo |intcomma}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr class="my-4">

    <div class="flex-1 flex font-bold justify-between">
        <h2>SUBTOTAL: ${{order.get_subtotal |intcomma}} </h2>
        <h2> IVA: $ {{order.get_iva |intcomma}} </h2>
        <h2>TOTAL A PAGAR: ${{order.total|intcomma}}</h2>
    </div>



    <a href="{% url 'products:product_list' %}" class="inline-block px-4 py-2 mt-6 text-white bg-green-600 rounded hover:bg-blue-700">
        Seguir comprando
    </a>
</div>
{% endblock %}
